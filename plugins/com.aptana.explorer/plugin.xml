<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="com.aptana.explorer.filters" name="%extension-point.filter.name" schema="schema/com.aptana.explorer.filters.exsd"/>
   <extension
         point="org.eclipse.ui.views">
      <view
            allowMultiple="true"
            category="com.aptana"
            class="com.aptana.explorer.internal.ui.FilteringProjectView"
            icon="icons/full/cview16/filenav_nav.png"
            id="com.aptana.explorer.view"
            name="%view.name"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.viewer">
      <viewer
            viewerId="com.aptana.explorer.view">
      </viewer>
      <viewerContentBinding
            viewerId="com.aptana.explorer.view">
         <includes>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resourceContent">
            </contentExtension>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resources.filters.*">
            </contentExtension>
            <contentExtension pattern="org.eclipse.jdt.java.ui.javaContent" />
			<contentExtension pattern="org.eclipse.jdt.java.ui.filters.*" />
			<contentExtension pattern="org.eclipse.ui.navigator.resources.linkHelper">
   </contentExtension>	
         </includes>
         <excludes>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resources.workingSets">
            </contentExtension>
         </excludes>
      </viewerContentBinding>
      <viewerActionBinding
            viewerId="com.aptana.explorer.view">
         <includes>
            <actionExtension
                  pattern="org\.eclipse\.ui\.navigator\.resources\.(?!WorkingSetActions).*">
            </actionExtension>
            <actionExtension
                  pattern="com.aptana.explorer.navigator.actions.*">
            </actionExtension>
         </includes>
      </viewerActionBinding>
      <dragAssistant
            class="org.eclipse.ui.navigator.resources.ResourceDragAdapterAssistant"
            viewerId="com.aptana.explorer.view">
      </dragAssistant>
	</extension>
   <extension
         point="com.aptana.scripting.contextContributors">
      <contributor
            class="com.aptana.explorer.ExplorerContextContributor"
            name="Active Project Info Contributors">
      </contributor>
   </extension>
   <extension
         point="com.aptana.scripting.loadPaths">
      <loadPath
            name="Aptana Studio Framework Files"
            path="framework/">
      </loadPath>
   </extension>
   <extension
         point="com.aptana.scripting.frameworkFiles">
      <file
            name="ruble/project.rb">
      </file>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
         class="com.aptana.explorer.internal.ui.SearchTextHandler:org.eclipse.ui.edit.cut"
         commandId="org.eclipse.ui.edit.cut">
        <activeWhen>
           <with variable="activeFocusControlId">
             <equals value="com.aptana.explorer.view.searchText"/>
           </with>
        </activeWhen>
      </handler>
      <handler
         class="com.aptana.explorer.internal.ui.SearchTextHandler:org.eclipse.ui.edit.copy"
         commandId="org.eclipse.ui.edit.copy">
        <activeWhen>
           <with variable="com.aptana.explorer.view.searchText">
             <equals value="com.aptana.explorer.view.SearchInProject"/>
           </with>
        </activeWhen>
      </handler>
      <handler
         class="com.aptana.explorer.internal.ui.SearchTextHandler:org.eclipse.ui.edit.paste"
         commandId="org.eclipse.ui.edit.paste">
        <activeWhen>
           <with variable="activeFocusControlId">
             <equals value="com.aptana.explorer.view.searchText"/>
           </with>
        </activeWhen>
      </handler>
      <handler
         class="com.aptana.explorer.internal.ui.SearchTextHandler:org.eclipse.ui.edit.selectAll"
         commandId="org.eclipse.ui.edit.selectAll">
        <activeWhen>
           <with variable="activeFocusControlId">
             <equals value="com.aptana.explorer.view.searchText"/>
           </with>
        </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <commonWizard
            associatedExtensionId="org.eclipse.ui.navigator.resourceContent"
            type="new"
            wizardId="com.aptana.ui.wizards.new.file">
         <enablement>
			<or>
				<adapt type="org.eclipse.core.resources.IFile" />
				<adapt type="org.eclipse.core.resources.IFolder" />
	         	<adapt type="org.eclipse.core.resources.IProject" />
	            <adapt type="org.eclipse.core.resources.IWorkspaceRoot" />
			</or>
	     </enablement>
      </commonWizard>
      <commonWizard
            associatedExtensionId="org.eclipse.ui.navigator.resourceContent"
            type="new"
            wizardId="com.aptana.ui.wizards.NewWebProject">
         <enablement></enablement>
      </commonWizard>
      <actionProvider
            class="com.aptana.explorer.navigator.actions.DeployActionProvider"
            id="com.aptana.explorer.navigator.actions.DeployActions">
         <enablement>
            <or>
               <instanceof
                     value="org.eclipse.core.resources.IResource">
               </instanceof>
            </or>
         </enablement>
      </actionProvider>
      <actionProvider
            class="com.aptana.explorer.navigator.actions.CommandsActionProvider"
            id="com.aptana.explorer.navigator.actions.CommandsActions">
         <enablement>
            <or>
               <instanceof
                     value="org.eclipse.core.resources.IResource">
               </instanceof>
            </or>
         </enablement>
      </actionProvider>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.ui.category.views"
            defaultHandler="com.aptana.explorer.internal.handlers.ToggleAppExplorerHandler"
            description="%command.toggleappexplorer.description"
            id="com.aptana.explorer.commands.toggleAppExplorer"
            name="%command.toggleappexplorer.name">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:true"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="com.aptana.explorer.internal.handlers.ToggleChangedFilesFilter"
            id="com.aptana.explorer.commands.toggleChangedFilesFilter"
            name="%command.toggleChangedFilesFilter.name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="com.aptana.ui.globalActionSet">
            <command
                  commandId="com.aptana.explorer.commands.toggleAppExplorer"
                  icon="icons/full/cview16/filenav_nav.png"
                  style="toggle">
               <visibleWhen>
                  <reference
                        definitionId="com.aptana.ui.contributions.inGlobalActionSet">
                  </reference>
               </visibleWhen>
            </command>
         </toolbar>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.deploy">
         <separator
               name="group.deploy"
               visible="true">
         </separator>
         <separator
               name="group.command"
               visible="true">
         </separator>
         <separator
               name="group.wizard"
               visible="true">
         </separator>
         <separator
               name="additions">
         </separator>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.deploy?endof=group.deploy">
         <command
               commandId="com.aptana.deploy.commands.deployApp"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <or>
                     <test
                           forcePluginActivation="true"
                           property="com.aptana.deploy.project.isDeployType"
                           value="cap">
                     </test>
                     <test
                           property="com.aptana.deploy.project.isDeployType"
                           value="heroku">
                     </test>
                     <test
                           property="com.aptana.deploy.project.isDeployType"
                           value="engineyard">
                     </test>
                  </or>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.deploy?endof=group.deploy">
         <command
               commandId="com.aptana.deploy.commands.deployApp"
               label="%FTPDeploy.label"
               icon="icons/full/elcl16/arrow_up_down.png"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <test
                        property="com.aptana.deploy.project.isDeployType"
                        value="ftp">
                  </test>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.deploy?endof=group.command">
         <dynamic
               class="com.aptana.explorer.internal.ui.HerokuContributionItem"
               id="com.aptana.explorer.deploy.heroku">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <test
                        property="com.aptana.deploy.project.isDeployType"
                        value="heroku">
                  </test>
               </iterate>
            </visibleWhen>
         </dynamic>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.deploy?endof=group.command">
         <command
               commandId="com.aptana.ide.syncing.ui.commands.upload"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <test
                        property="com.aptana.deploy.project.isDeployType"
                        value="ftp">
                  </test>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.ide.syncing.ui.commands.download"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <test
                        property="com.aptana.deploy.project.isDeployType"
                        value="ftp">
                  </test>
               </iterate>
            </visibleWhen>
         </command>
         <separator
               name="group.ftp.settings"
               visible="true">
         </separator>
         <command
               commandId="com.aptana.deploy.commands.ftp.settings"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <test
                        property="com.aptana.deploy.project.isDeployType"
                        value="ftp">
                  </test>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.deploy?endof=group.command">
         <dynamic
               class="com.aptana.explorer.internal.ui.EngineYardContributionItem"
               id="com.aptana.explorer.deploy.engineyard">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <test
                        property="com.aptana.deploy.project.isDeployType"
                        value="engineyard">
                  </test>
               </iterate>
            </visibleWhen>
         </dynamic>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.deploy?endof=group.wizard">
         <command
               commandId="com.aptana.deploy.commands.deploywizard"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="org.eclipse.core.resources.IResource">
                  </instanceof>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:com.aptana.explorer.view?before=group.edit">
         <menu
               id="appExplorerShowIn"
               label="%ShowIn.label">
            <dynamic
                  class="com.aptana.ui.commands.OpenFileManagerContributionItem"
                  id="com.aptana.explorer.open.file.manager">
            </dynamic>
            <visibleWhen
                  checkEnabled="false">
               <iterate>
                  <instanceof
                        value="org.eclipse.core.resources.IResource">
                  </instanceof>
               </iterate>
            </visibleWhen>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="popup:com.aptana.explorer.view?before=additions">
         <separator
               name="git.group"
               visible="true">
         </separator>
         <command
               commandId="com.aptana.git.ui.command.commit"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.stage"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.unstage"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.revert"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.diff"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear">
         <separator
               name="group.filtering"
               visible="true">
         </separator>
         <separator
               name="group.run"
               visible="true">
         </separator>
         <separator
               name="group.open"
               visible="true">
         </separator>
         <separator
               name="group.goto"
               visible="true">
         </separator>
         <separator
               name="group.git.files"
               visible="true">
         </separator>
         <separator
               name="group.git.project"
               visible="true">
         </separator>
         <separator
               name="group.git.branching"
               visible="true">
         </separator>
         <separator
               name="additions">
         </separator>
         <separator
               name="group.properties"
               visible="true">
         </separator>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.open">
         <command
               commandId="com.aptana.terminal.commands.openTerminal"
               icon="icons/full/obj16/terminal.png"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.git.files">
         <command
               commandId="com.aptana.git.ui.command.stage"
               style="push">
             <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
               
               <with
                     variable="activePartId">
                  <equals
                        value="com.aptana.explorer.view">
                  </equals>
               </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.unstage"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.revert"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.diff"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.git.project">
         <command
               commandId="com.aptana.git.ui.command.commit"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.push"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.pull"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.status"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.attach"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.git.branching">
         <menu
               id="com.aptana.explorer.branch.menu"
               label="%menu.branch.label">
            <menu
                  commandId="com.aptana.git.ui.command.switch_branch"
                  label="%menu.branch.switch.label">
               <dynamic
                     class="com.aptana.git.ui.actions.SwitchBranchItem"
                     id="com.aptana.explorer.git.switch_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </menu>
            <menu
                  commandId="com.aptana.git.ui.command.merge_branch"
                  label="%menu.branch.merge.label">
               <dynamic
                     class="com.aptana.git.ui.actions.MergeBranchItem"
                     id="com.aptana.explorer.git.merge_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </menu>
            <command
                  commandId="com.aptana.git.ui.command.create_branch"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <menu
                  commandId="com.aptana.git.ui.command.delete_branch"
                  label="%menu.branch.delete.label">
               <dynamic
                     class="com.aptana.git.ui.actions.DeleteBranchItem"
                     id="com.aptana.explorer.git.delete_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </menu>
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </menu>
         <menu
               label="%menu.more.label">
            <command
                  commandId="com.aptana.git.ui.command.stash"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.unstash"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.add_remote"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.showInResourceHistory"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.github.network"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.disconnect"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.goto">
         <menu
               label="%menu.switchapp.label">
            <dynamic
                  class="com.aptana.explorer.internal.handlers.SwitchProjectMenuItem"
                  id="com.aptana.explorer.switch_application.items">
            </dynamic>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.filtering">
         <command
               commandId="com.aptana.explorer.commands.toggleChangedFilesFilter"
               icon="icons/full/elcl16/filter.png"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="com.aptana.deploy.commands.deployApp"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="CTRL+M3+D">
      </key>
   </extension>
</plugin>
